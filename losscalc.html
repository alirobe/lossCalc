<html>
<head>
<script src='js/knockout-2.2.1.js'></script>
<script src='js/standards.js'></script>
<script src='js/losscalc.js'></script>
<link href="css/losstest.css" rel="stylesheet" type="text/css">
</head>
<body>

<h1> Loss Budget Calculator </h1>


<table class="calculator">
<tr class="header" > 
	<td colspan=2> Cable Parameters</td>
</tr>
<tr class="entryrow">
<td> Fiber Length </td>
<td> 
    <input type="number" data-bind="value: cableLength"/>
    <select data-bind="options: distanceUnits,
                        optionsText: 'name',
                        value: selectedDistanceUnits "> </select>
    (<span data-bind="text: adjustedDistance"></span> Km )
    
</td>
</tr>
<tr class="entryrow">
<td> Connectors </td>
<td>
    <span> <input type="number"  data-bind="value: numberOfConnectors"> </span>
    <span>Splices </span> <span> <input type="number" data-bind="value: numberOfSplices"/> </span>
</td>
</tr>


	<td colspan=2> Other Components Loss </td>
</tr>

<tr class="entryrow">
	<td>  Switch Loss </td>
	<td> <input type="number" data-bind="value: switchLoss"/> dB </td>
</tr>

<tr class="entryrow">
<td>  Splitter Loss </td>
<td> <input type="number" data-bind="value: splitterLoss"/> dB </td>
</tr>

<tr class="entryrow">
<td> Other Loss </td>
<td> <input type="number" data-bind="value: otherLoss"/> dB </td>
</tr>

<tr class="entryrow">
<td> Test Standard </td>
<td>
	<select data-bind="options: availableStandards,
				optionsCaption: 'Select Standard',
				optionsText: 'name',
				value: selectedStandard "/> 
</td>
</tr>
</table>


<table>
<tr data-bind="foreach: lossResults" >    
	
    <td> 
        <table>
            <tr data-bind="text: testWavelength.lambda">  </tr>  
            <tr class="subtotal">
                <td> Fibre Loss <span data-bind="text: testWavelength.lossPerKm"/> db/km</td>
                <td> <span data-bind="text: fibreLoss.toFixed(2)"></span> dB</td>
    
            </tr>

            <tr class="subtotal">
                <td> Connector Loss </td>
                <td> <span data-bind="text: $parent.connectorLoss().toFixed(2)"></span> dB </td>
            </tr>


            <tr class="subtotal">
                <td> Splice Loss </td>
                <td> <span data-bind="text: $parent.spliceLoss().toFixed(2)"></span> dB</td>
            </tr>


            <tr class="subtotal">
                <td> Other Loss </td>
                <td> <span data-bind="text: $parent.totalOtherLoss"></span> dB </td>
            </tr>

            <tr class="total">
                <td> Allowed Loss </td>
                <td> <span data-bind="text: totalLoss.toFixed(2)"></span> dB </td>
            </tr>		
        </table>
    </td>
</tr>
</table>

<script>


	ko.applyBindings(new CalculatorViewModel());
	
	
</script>
</body>

</html>
