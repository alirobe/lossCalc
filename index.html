<html>
<head>
<script src='js/knockout-2.2.1.js'></script>
<script src='js/standards.js'></script>
<script src='js/losscalc.js'></script>
<link href="css/losstest.css" rel="stylesheet" type="text/css">
</head>
<body>

<h1> Loss Budget Calculator </h1>


<table class="calculator">
<tr class="header" > 
	<td colspan=2> Fibre Loss </td>
</tr>
<tr class="entryrow">
<td> Cable Distance </td>
<td> 
	<input data-bind="value: cableLength"/>
	<select data-bind="options: distanceUnits,

				optionsText: 'name',
				value: selectedDistanceUnits "> </select>
</td>
<td data-bind="with: selectedDistanceUnits"> 
	<span data-bind="text: $parent.cableLength"> </span> <span data-bind="text: name"></span> (  <span data-bind="text: $parent.adjustedDistance"></span> Km )
    
</td>
</tr>
<tr class="entryrow">
<td> Number of Connectors </td>
<td> <input type="number"  data-bind="value: numberOfConnectors"/></td>
</tr>

<tr class="entryrow">
<td> Number of Splices </td>
<td> <input type="number" data-bind="value: numberOfSplices"/> </td>
</tr>

<tr class="header" > 
	<td colspan=2> Other Components Loss </td>
</tr>

<tr class="entryrow">
	<td> Optical Bypass Switch Loss </td>
	<td> <input type="number" data-bind="value: switchLoss"/> dB </td>
</tr>

<tr class="entryrow">
<td> Optical Splitter Loss </td>
<td> <input type="number" data-bind="value: splitterLoss"/> dB </td>
</tr>

<tr class="entryrow">
<td> Other Component Loss </td>
<td> <input type="number" data-bind="value: otherLoss"/> dB </td>
</tr>

<tr class="entryrow">
<td> Test Standard </td>
<td>
	<select data-bind="options: availableStandards,
				optionsCaption: 'Select Standard',
				optionsText: 'name',
				value: selectedStandard "/> 
</td>
</tr>
</table>


<table>
<tr data-bind="foreach: lossResults" >    
	
    <td> 
        <table>
            <tr data-bind="text: testWavelength.lambda">  </tr>  
            <tr class="subtotal">
                <td> Total Fibre Loss <span data-bind="text: testWavelength.lossPerKm"/> db/km</td>
                <td> <span data-bind="text: fibreLoss.toFixed(2)"></span> dB</td>
    
            </tr>

            <tr class="subtotal">
                <td> Total Connector Loss </td>
                <td> <span data-bind="text: $parent.connectorLoss().toFixed(2)"></span> dB </td>
            </tr>


            <tr class="subtotal">
                <td> Total Splice Loss </td>
                <td> <span data-bind="text: $parent.spliceLoss().toFixed(2)"></span> dB</td>
            </tr>


            <tr class="subtotal">
                <td> Total Other Components Loss </td>
                <td> <span data-bind="text: $parent.totalOtherLoss"></span> dB </td>
            </tr>

            <tr class="header" > 
                <td colspan=2> Total Loss </td>
            </tr>
            <tr class="total">
                <td> Total Cable System Loss </td>
                <td> <span data-bind="text: totalLoss.toFixed(2)"></span> dB </td>
            </tr>		
        </table>
    </td>
</tr>
</table>

<script>


	ko.applyBindings(new CalculatorViewModel());
	
	
</script>
</body>

</html>
